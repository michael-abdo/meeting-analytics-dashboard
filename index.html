<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Analytics Dashboard</title>
    <!-- Modular CSS Architecture -->
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/theme.css">
    
    <style>
        /* Critical inline styles for initial render - rest in external CSS */
        
        /* Skip to main content link for accessibility */
        .skip-nav {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--color-primary, #3b82f6);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 2001;
        }
        
        .skip-nav:focus {
            top: 0;
        }
        
        /* Screen reader announcer */
        .sr-announcer {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        /* Alert system styles */
        .alert {
            padding: var(--spacing-md);
            margin: var(--spacing-sm) 0;
            border-radius: var(--radius-base);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            animation: slideIn 0.3s ease-out;
        }
        
        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--color-warning);
            color: var(--color-warning);
        }
        
        .alert-critical {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid var(--color-critical);
            color: var(--color-critical);
        }
        
        .alert-close {
            margin-left: auto;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .alert-close:hover {
            opacity: 1;
        }
        
        /* Loading states */
        .loading {
            position: relative;
            color: transparent !important;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            margin: -8px 0 0 -8px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        /* Animations */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        /* Modal animations */
        .modal-overlay.closing {
            animation: fadeOut 0.2s ease-out forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
            }
        }
        
        /* Metric detail grid */
        .metric-detail-grid {
            display: grid;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }
        
        .metric-detail-item {
            display: flex;
            justify-content: space-between;
            padding: var(--spacing-sm);
            background: var(--color-bg-secondary);
            border-radius: var(--radius-base);
        }
        
        .metric-detail-label {
            font-weight: var(--font-weight-medium);
            color: var(--color-text-secondary);
        }
        
        .metric-detail-value {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
        }
        
        /* Enhanced focus states for better accessibility */
        .enhanced-focus:focus-visible {
            outline: 3px solid var(--color-primary);
            outline-offset: 2px;
        }
        
        /* Data freshness animation */
        @keyframes pulse-dot {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
        }
        
        .data-fresh::after {
            animation: pulse-dot 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="logo">Meeting Analytics</h1>
            <div class="score-display">
                <div class="score-item">
                    <div class="score-label">Session Time</div>
                    <div class="score-value" data-metric="session-time">02:45:12</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Attention Level</div>
                    <div class="score-value attention">Elevated</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Participants</div>
                    <div class="score-value">4 Active</div>
                </div>
                <div class="score-item priority-high">
                    <div class="score-label">Speaking Balance</div>
                    <div class="score-value warning trend-down">Imbalanced</div>
                </div>
            </div>
        </header>
        
        <main class="main-area" id="main-content">
            <div class="side-panel">
                <div class="player-card status-attention priority-high">
                    <div class="player-header">
                        <div class="player-avatar">SC</div>
                        <div class="player-info">
                            <div class="player-name">Sarah Chen</div>
                            <div class="player-status attention">📊 High Participation</div>
                        </div>
                    </div>
                    <div class="player-stats">
                        <div class="stat-box intensity-high">
                            <div class="stat-label">Speaking Time</div>
                            <div class="stat-value attention trend-up" data-stat="speaking-time" data-live-update data-format="percentage">73%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Engagement</div>
                            <div class="stat-value" data-stat="engagement" data-live-update data-format="percentage">89%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Interruptions</div>
                            <div class="stat-value warning" data-stat="interruptions">4</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Sentiment</div>
                            <div class="stat-value warning">Concerned</div>
                        </div>
                    </div>
                </div>
                
                <div class="player-card status-warning priority-high">
                    <div class="player-header">
                        <div class="player-avatar">TL</div>
                        <div class="player-info">
                            <div class="player-name">Tom Liu</div>
                            <div class="player-status warning critical-alert">📉 Low Engagement</div>
                        </div>
                    </div>
                    <div class="player-stats">
                        <div class="stat-box">
                            <div class="stat-label">Speaking Time</div>
                            <div class="stat-value warning" data-stat="speaking-time" data-live-update data-format="percentage">12%</div>
                        </div>
                        <div class="stat-box intensity-high">
                            <div class="stat-label">Engagement</div>
                            <div class="stat-value warning trend-down" data-stat="engagement" data-live-update data-format="percentage">23%</div>
                        </div>
                        <div class="stat-box intensity-high">
                            <div class="stat-label">Eye Contact</div>
                            <div class="stat-value warning trend-down" data-stat="eye-contact" data-live-update data-format="percentage">8%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Sentiment</div>
                            <div class="stat-value warning">Frustrated</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="center-display">
                <div class="insight-zone critical priority-high intensity-high">
                    <h2 class="insight-title">📊 Speaking Time Analysis</h2>
                    <p style="margin-bottom: 20px; font-size: 16px; color: #374151;">Sarah: <span class="trend-up">73%</span> speaking time (Recommended: 25% per participant)</p>
                    <div class="fatigue-meter">
                        <div class="fatigue-fill"></div>
                        <div class="fatigue-value">Attention Recommended</div>
                    </div>
                    <p style="color: #374151; font-size: 14px;">Note: Uneven participation patterns observed</p>
                    <p style="color: #374151; font-size: 14px; margin-top: 8px;">Team engagement trend: 78% → 41% (last 5 min)</p>
                    <p style="color: #3b82f6; font-size: 12px; margin-top: 8px;">[Modal Analysis: VOICE 87% | FACIAL 82% | TEXT 91%]</p>
                </div>
                
                <div class="power-grid">
                    <div class="power-card warning priority-high intensity-high" role="button" tabindex="0" aria-label="Discussion overlaps: 7 per 5 minutes" data-metric="interruptions">
                        <div class="power-icon" aria-hidden="true">🗣️</div>
                        <div class="power-label">Discussion Overlaps</div>
                        <div class="power-value warning">7/5min</div>
                    </div>
                    <div class="power-card warning" role="button" tabindex="0" aria-label="Conversation tone: 67% negative" data-metric="sentiment-negative">
                        <div class="power-icon" aria-hidden="true">📊</div>
                        <div class="power-label">Conversation Tone</div>
                        <div class="power-value warning">67% Negative</div>
                    </div>
                    <div class="power-card warning" role="button" tabindex="0" aria-label="Eye contact: 34% detected" data-metric="eye-contact">
                        <div class="power-icon" aria-hidden="true">👁️</div>
                        <div class="power-label">Eye Contact</div>
                        <div class="power-value warning">34%</div>
                    </div>
                    <div class="power-card warning" role="button" tabindex="0" aria-label="Language patterns: 8 high priority flags" data-metric="language-patterns">
                        <div class="power-icon" aria-hidden="true">🎯</div>
                        <div class="power-label">Language Patterns</div>
                        <div class="power-value warning">8<br><span style="font-size: 14px;">High</span></div>
                    </div>
                    <div class="power-card critical" role="button" tabindex="0" aria-label="Speaking time: Sarah has 73%" data-metric="speaking-time-max">
                        <div class="power-icon" aria-hidden="true">🗺️</div>
                        <div class="power-label">Speaking Time</div>
                        <div class="power-value">Sarah 73%</div>
                    </div>
                    <div class="power-card" role="button" tabindex="0" aria-label="Engagement: 41%" data-metric="engagement">
                        <div class="power-icon">📈</div>
                        <div class="power-label">Engagement</div>
                        <div class="power-value attention" data-live-update data-format="percentage">41%</div>
                    </div>
                    <div class="power-card">
                        <div class="power-icon">💬</div>
                        <div class="power-label">Certainty Words</div>
                        <div class="power-value warning">91%</div>
                    </div>
                    <div class="power-card">
                        <div class="power-icon">⚙️</div>
                        <div class="power-label">Vocal Pitch</div>
                        <div class="power-value warning">+23Hz</div>
                    </div>
                </div>
                
                <div class="speaking-chart">
                    <h3 class="chart-title">Speaking Time Distribution</h3>
                    <div class="chart-container">
                        <div class="chart-bar">
                            <div class="bar-label">Sarah</div>
                            <div class="bar-fill sarah-bar" style="width: 73%;">73%</div>
                        </div>
                        <div class="chart-bar">
                            <div class="bar-label">Tom</div>
                            <div class="bar-fill tom-bar" style="width: 12%;">12%</div>
                        </div>
                        <div class="chart-bar">
                            <div class="bar-label">Maya</div>
                            <div class="bar-fill maya-bar" style="width: 8%;">8%</div>
                        </div>
                        <div class="chart-bar">
                            <div class="bar-label">James</div>
                            <div class="bar-fill james-bar" style="width: 7%;">7%</div>
                        </div>
                    </div>
                </div>
                
                <div class="sentiment-timeline">
                    <h3 class="chart-title">Emotional Tone Timeline</h3>
                    <div class="timeline-container">
                        <div class="timeline-axis">
                            <span class="axis-label">90%</span>
                            <span class="axis-label">60%</span>
                            <span class="axis-label">30%</span>
                            <span class="axis-label">0%</span>
                        </div>
                        <div class="timeline-chart">
                            <svg class="timeline-svg" viewBox="0 0 300 100">
                                <path class="sentiment-path" d="M0,30 Q75,20 150,40 Q225,60 300,80" />
                                <circle class="sentiment-point" cx="0" cy="30" r="3" />
                                <circle class="sentiment-point" cx="75" cy="20" r="3" />
                                <circle class="sentiment-point" cx="150" cy="40" r="3" />
                                <circle class="sentiment-point" cx="225" cy="60" r="3" />
                                <circle class="sentiment-point attention" cx="300" cy="80" r="4" />
                            </svg>
                        </div>
                        <div class="timeline-labels">
                            <span>0min</span>
                            <span>10min</span>
                            <span>20min</span>
                            <span>30min</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="side-panel">
                <div class="intervention-panel">
                    <h3 class="panel-title">💬 Facilitation Suggestions</h3>
                    <div class="intervention-item">
                        <div class="intervention-header">
                            <span class="intervention-icon">💬</span>
                            <span class="intervention-title">Discussion Guidance</span>
                            <span class="success-rate">87%</span>
                        </div>
                        <p class="intervention-text">"Sarah, your insights are valuable. What potential challenges should we consider to strengthen our approach?"</p>
                        <div class="intervention-actions">
                            <button class="btn btn-primary" onclick="executeIntervention()" aria-label="Execute suggested intervention message">Execute</button>
                            <button class="btn btn-secondary" onclick="showAlternative()" aria-label="Show alternative intervention suggestions">Alternative</button>
                        </div>
                    </div>
                </div>
                
                <div class="transcript-panel">
                    <h3 class="panel-title">📝 Live Transcript</h3>
                    <div class="transcript-feed">
                        <div class="transcript-item attention">
                            <div class="transcript-time">10:23:45</div>
                            <div class="transcript-content">
                                <strong>Sarah:</strong> "Everyone knows this is the only way"
                                <div class="bias-flags">
                                    <span class="flag">Definitive language</span>
                                    <span class="flag">Broad assertion</span>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="action-bar">
            <button class="action-btn" onclick="viewAnalytics()" aria-label="View analytics section of dashboard">📊 View Analytics</button>
            <button class="action-btn" onclick="suggestBreak()" aria-label="Suggest break to meeting participants">⏸️ Suggest Break</button>
            <button class="action-btn secondary" onclick="exportReport()" aria-label="Export meeting analytics report as JSON">📄 Export Report</button>
            <button class="action-btn secondary" onclick="openPreferences()" aria-label="Open dashboard preferences and settings">⚙️ Preferences</button>
        </footer>
    </div>
    
    <div class="floating-hud">
        <h3 class="hud-title">Session Analytics</h3>
        <div class="hud-item">
            <span class="hud-label">Team Engagement</span>
            <span class="hud-value" data-live-update data-format="percentage">41%</span>
        </div>
        <div class="hud-item">
            <span class="hud-label">Items Noted</span>
            <span class="hud-value attention">3</span>
        </div>
        <div class="hud-item">
            <span class="hud-label">Session Duration</span>
            <span class="hud-value">02:45:12</span>
        </div>
        <div class="hud-item">
            <span class="hud-label">Guidance Accepted</span>
            <span class="hud-value">40%</span>
        </div>
    </div>

    <!-- Modular JavaScript Architecture -->
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/interactions.js"></script>
    <script src="assets/js/analytics.js"></script>
    
    <script>
        /* Performance optimization: Set session time immediately to avoid flicker */
        if (!window.dashboard) {
            const sessionStart = Date.now();
            const updateTime = () => {
                const elapsed = Math.floor((Date.now() - sessionStart) / 1000);
                const hours = Math.floor(elapsed / 3600);
                const minutes = Math.floor((elapsed % 3600) / 60); 
                const seconds = elapsed % 60;
                const timeString = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                const element = document.querySelector('[data-metric="session-time"]');
                if (element) element.textContent = timeString;
            };
            setInterval(updateTime, 1000);
        }
    </script>
</body>
</html>